---
import { getCollection } from "astro:content";
import MainLayout from "../layouts/MainLayout.astro";

const services = await getCollection("services");
const baseImages = services
  .filter((service) => Boolean(service.data.featuredImage))
  .map((service) => ({
    src: service.data.featuredImage!,
    alt: `${service.data.title} installation`,
  }));

const fieldGallery = [
  {
    src: "/images/native-pollinator-border.jpg",
    alt: "Venice pollinator border with cutleaf coneflower and coral honeysuckle planted by Jaime Goulet",
  },
  {
    src: "/images/native-buttonbush-landscape.jpg",
    alt: "Buttonbush (Cephalanthus occidentalis) flowering beside a Sarasota pond",
  },
  {
    src: "/images/native-muhly-senna.jpg",
    alt: "Muhly grass and Chapman's senna pairing in a Nokomis roadside habitat",
  },
  {
    src: "/images/native-cutleaf-coneflower.jpg",
    alt: "Cutleaf coneflower cluster from a North Port backyard meadow",
  },
];

const gallery = [...fieldGallery, ...baseImages];
---
<MainLayout
  title="Gallery | Tender Gardens"
  description="Browse Jaime Gouletâ€™s native garden installs, seasonal refreshes, and pollinator-friendly courtyard styling across Venice and Sarasota."
>
  <section class="px-4 pb-24 pt-10 sm:px-6">
    <div class="mx-auto max-w-5xl text-center">
      <p class="text-xs uppercase tracking-[0.3em] text-[#0ea5e9]">Gallery</p>
      <h1 class="mt-3 text-4xl font-black uppercase md:text-5xl">Recent installs & glow-ups</h1>
      <p class="mx-auto mt-4 max-w-3xl text-base text-neutral-600">
        A peek at lawns, beds, patios, and storefronts we've refreshed across Venice, Sarasota, and neighboring coastal towns. Every project is photographed post-service so you can visualize the habitat-friendly glow.
      </p>
    </div>

    <div class="mx-auto mt-16 grid max-w-6xl gap-6 md:grid-cols-3">
      {gallery.map((image, index) => (
        <figure class={`relative overflow-hidden rounded-3xl border-[3px] border-black bg-white shadow-[10px_10px_0_#111] ${index % 5 === 0 ? "md:col-span-2" : ""}`}>
          <img src={image.src} alt={image.alt} class="h-full w-full object-cover" loading={index < 2 ? "eager" : "lazy"} />
        </figure>
      ))}
    </div>
  </section>
</MainLayout>
